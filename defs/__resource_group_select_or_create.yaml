- type: fieldset
  id: fieldset-resource-group-select-or-create
  subitems:
    - type: radio-group
      id: radio-group-resource-group-select-or-create
      subitems:
        - type: radio
          id: radio-resource-group-select
          value: select
          text: Existing Resource Group
          variable: resource-group-creation
          default: true
        - type: radio
          id: radio-resource-group-create
          value: create
          text: New Resource Group
          variable: resource-group-creation
          default: false
  
- type: fieldset
  id: fieldset-resource-group-creation
  show-if:
    variable: resource-group-creation
    value: create
  subitems:
    - type: row
      id: region-row
      subitems:
        - type: combo
          id: region-combo
          name: Select Region
          items: []
          source:
            cmd: |
              az account list-locations
            path-id: $[*].name
            path-name: $[*].displayName
          variable: region
    - type: row
      id: name-row
      subitems:
        - type: textfield
          id: moo-combo
          name: Name
          variable: resource_group_name
    - type: 'action-row'
      id: create-resource-group
      name: Create Resource Group
      variables:
        - region
        - resource_group_name
      verify: |
          $out = az group exists --name ${resource_group_name}
          if ($out -like '*true*') { exit 0 } else { exit 1 }
      install: az group create --name ${resource_group_name} --location ${region}
      uninstall: az group delete --name ${resource_group_name}

- type: fieldset
  id: fieldset-resource-group-selection
  show-if:
    variable: resource-group-creation
    value: select
  subitems:
    - type: row
      id: resource-group-selection-row
      subitems:
        - type: combo
          id: resource-group-selection-combo
          name: Select Resource Group
          items: []
          source:
            cmd: |
              az group list
            path-id: $[*].id
            path-name: $[*].name
          variable: resource_group_name
