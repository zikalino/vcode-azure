type: layout-form
id: root
header:
  - type: header
    title: Static Website
    logo: espressif.svg
form:
  - type: fieldset
    id: fieldset-resource-group-select-or-create
    subitems:
      - type: radio-group
        id: radio-group-resource-group-select-or-create
        subitems:
          - type: radio
            id: radio-resource-group-select
            value: select
            text: Existing Resource Group
            variable: resource-group-creation
          - type: radio
            id: radio-resource-group-create
            value: create
            text: New Resource Group
            variable: resource-group-creation
    
  - type: fieldset
    id: fieldset-resource-group-creation
    show-if:
      variable: resource-group-creation
      value: create
    subitems:
      - type: row
        id: region-row
        subitems:
          - type: combo
            id: region-combo
            name: Select Region
            items:
              - eastus
              - eastus2
              - westus
            variable: region
      - type: row
        id: name-row
        subitems:
          - type: textfield
            id: moo-combo
            name: Name
            items:
              - eastus
              - eastus2
              - westus
            variable: name
      - type: 'action-row'
        id: create-resource-group
        name: Create Resource Group
        variables:
          - region
          - name
        verify: |
            $out = az group exists --name ${name}
            if ($out -like '*true*') { exit 0 } else { exit 1 }
        install: az group create --name ${name} --location ${region}
        uninstall: az group delete --name ${name}

  - type: fieldset
    id: fieldset-resource-group-selection
    show-if:
      variable: resource-group-creation
      value: select
    subitems:
      - type: row
        id: resource-group-selection-row
        subitems:
          - type: combo
            id: resource-group-selection-combo
            name: Select Resource Group
            items:
              - MyResourceGroup1
              - MyResourceGroup2
              - MyResourceGroup3
            source:
              cmd: |
                az group list
              path-id: $[*].id
              path-name: $[*].name
            variable: resource-group

footer:
  - type: footer
    id: footer
    subitems:
      - type: button
        id: install_button
        text: Install
